#!/usr/bin/env coffee

Authority = require "authority"
{readFileSync, writeFileSync} = require "fs"

Authority.createCertificate
  "subject":
    "common_name":   "artlist.dev"
    "title":         "THE ARTLIST"

  "subject_key": readFileSync "webserver/artlist.dev.secret.key"

  "started_at": (new Date).toJSON()
  "expires_at": "2020-01-01T00:00:01.000Z"

  "callback": (error, certificate) ->
    throw error if error
    writeFileSync "webserver/artlist.dev.crt", certificate.pem
